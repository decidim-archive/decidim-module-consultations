<% if current_consultation.features.any? %>
  <div class="row column">
    <div class="process-nav">
      <button class="process-nav__trigger hide-for-medium"  data-toggle="process-nav-content">
        <%= icon "caret-bottom", class: "icon--small process-nav__trigger__icon", aria_label: t(".unfold"), role: "img" %>
        <div class="process-nav__link">
          <%  if self.try(:current_feature) %>
            <%= feature_icon(current_feature) %>
            <%= translated_attribute(current_feature.name) %>
          <% else %>
            <%= icon "comment-square" %>
            <%= t ".consultation_menu_item" %>
          <% end %>
        </div>
      </button>
      <div class="row column process-nav__content is-active" id="process-nav-content" data-toggler=".is-active">
        <ul>
          <li class="<%= 'is-active' if is_active_link?(decidim_consultations.consultation_path(current_consultation), :exclusive) %>">
            <%= active_link_to decidim_consultations.consultation_path(current_consultation),
                               active: :exclusive,
                               class: "process-nav__link",
                                 class_active: "is-active" do %>
              <%= icon "comment-square" %>
              <%= t ".consultation_menu_item" %>
            <% end %>
          </li>

          <% current_consultation.features.each do |feature| %>
            <% if feature.published? || feature == self.try(:current_feature) %>
              <li class="<%= "is-active" if is_active_link?(main_feature_path(feature), :inclusive) %>">
                <%= active_link_to main_feature_path(feature), class: 'process-nav__link', active: :inclusive, class_active: 'is-active' do %>
                  <%= feature_icon(feature) %>
                  <%= translated_attribute(feature.name) %>
                <% end %>
              </li>
            <% end %>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
<% end %>
